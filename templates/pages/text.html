{% extends 'base.html' %}

{% block title %}
Text
{% endblock title %}

{% block content %}

<h1 class="mb-3">Send Text to Matrix</h1>
<p class="text-muted">Control up to three lines of text with custom colors.</p>

<form onsubmit="return false;">
  <!-- Line 1 -->
  <div class="form-row align-items-center mb-3">
    <div class="col-12 col-md-2 mb-2 mb-md-0">
      <label for="colorPicker" class="small mb-1">Line 1 color</label>
      <input type="color" id="colorPicker" value="#ff0000" title="Set PAINT color" class="form-control p-0">
    </div>
    <div class="col-12 col-md-7 mb-2 mb-md-0">
      <label for="textBox" class="small mb-1">Line 1 text</label>
      <input name="text" id="textBox" class="form-control" placeholder="Enter text for line 1">
    </div>
    <div class="col-12 col-md-3">
      <label class="small d-none d-md-block">&nbsp;</label>
      <button type="button" id="sendButton" class="btn btn-primary btn-block">Send line 1</button>
    </div>
  </div>

  <!-- Line 2 -->
  <div class="form-row align-items-center mb-3">
    <div class="col-12 col-md-2 mb-2 mb-md-0">
      <label for="colorPicker2" class="small mb-1">Line 2 color</label>
      <input type="color" id="colorPicker2" value="#ff0000" title="Set PAINT color" class="form-control p-0">
    </div>
    <div class="col-12 col-md-7 mb-2 mb-md-0">
      <label for="textBox2" class="small mb-1">Line 2 text</label>
      <input name="text" id="textBox2" class="form-control" placeholder="Enter text for line 2">
    </div>
    <div class="col-12 col-md-3">
      <label class="small d-none d-md-block">&nbsp;</label>
      <button type="button" id="sendButton2" class="btn btn-primary btn-block">Send line 2</button>
    </div>
  </div>

  <!-- Line 3 -->
  <div class="form-row align-items-center mb-3">
    <div class="col-12 col-md-2 mb-2 mb-md-0">
      <label for="colorPicker3" class="small mb-1">Line 3 color</label>
      <input type="color" id="colorPicker3" value="#ff0000" title="Set PAINT color" class="form-control p-0">
    </div>
    <div class="col-12 col-md-7 mb-2 mb-md-0">
      <label for="textBox3" class="small mb-1">Line 3 text</label>
      <input name="text" id="textBox3" class="form-control" placeholder="Enter text for line 3">
    </div>
    <div class="col-12 col-md-3">
      <label class="small d-none d-md-block">&nbsp;</label>
      <button type="button" id="sendButton3" class="btn btn-primary btn-block">Send line 3</button>
    </div>
  </div>
</form>

{% endblock content %}

{% block scripts %}
<script>
  function sendLine(line, textId, colorId) {
    const text = document.getElementById(textId).value;
    const userColor = document.getElementById(colorId).value;

    $.ajax({
      url: '/text2',
      type: 'POST',
      contentType: 'application/json',
      data: JSON.stringify({ text: text, color: userColor, line: line }),
      success: function(response) {
        console.log('success', line);
      },
      error: function(error) {
        console.log('error', error);
      }
    });
  }

  $('#sendButton').on('click', () => sendLine(0, 'textBox', 'colorPicker'));
  $('#sendButton2').on('click', () => sendLine(1, 'textBox2', 'colorPicker2'));
  $('#sendButton3').on('click', () => sendLine(2, 'textBox3', 'colorPicker3'));
</script>
{% endblock scripts %}
